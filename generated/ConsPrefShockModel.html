<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ConsPrefShockModel &mdash; HARK 0.97 documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.97',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="HARK 0.97 documentation" href="../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">HARK 0.97 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-ConsPrefShockModel">
<span id="consprefshockmodel"></span><h1>ConsPrefShockModel<a class="headerlink" href="#module-ConsPrefShockModel" title="Permalink to this headline">¶</a></h1>
<p>Extensions to ConsIndShockModel concerning models with preference shocks.
It currently only has one model, in which utility is subject to an iid lognormal
multiplicative shock each period; it assumes that there are different interest
rates on borrowing and saving.</p>
<p class="rubric">Functions</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">approxMeanOneLognormal</span></code>(*args,&nbsp;**kwargs)</td>
<td>Calculate a discrete approximation to a mean one lognormal distribution.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.solveConsPrefShock" title="ConsPrefShockModel.solveConsPrefShock"><code class="xref py py-obj docutils literal"><span class="pre">solveConsPrefShock</span></code></a>(solution_next,&nbsp;...)</td>
<td>Solves a single period of a consumption-saving model with preference shocks to marginal utility.</td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ConsKinkedRsolver</span></code>(solution_next,&nbsp;IncomeDstn,&nbsp;...)</td>
<td>A class to solve a single period consumption-saving problem where the interest rate on debt differs from the interest rate on savings.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.ConsPrefShockSolver" title="ConsPrefShockModel.ConsPrefShockSolver"><code class="xref py py-obj docutils literal"><span class="pre">ConsPrefShockSolver</span></code></a>(solution_next,&nbsp;...)</td>
<td>A class for solving the one period consumption-saving problem with risky income (permanent and transitory shocks), a different interest factor on borrowing and saving, and multiplicative shocks to utility each period.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ConsumerSolution</span></code>([cFunc,&nbsp;vFunc,&nbsp;vPfunc,&nbsp;...])</td>
<td>A class representing the solution of a single period of a consumption-saving problem.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">CubicInterp</span></code>(x_list,&nbsp;y_list,&nbsp;dydx_list[,&nbsp;...])</td>
<td>An interpolating function using piecewise cubic splines.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">KinkedRconsumerType</span></code>([cycles,&nbsp;time_flow])</td>
<td>A consumer type that faces idiosyncratic shocks to income and has a different interest factor on saving vs borrowing.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">LinearInterp</span></code>(x_list,&nbsp;y_list[,&nbsp;...])</td>
<td>A slight extension of scipy.interpolate&#8217;s UnivariateSpline for linear inter- polation.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">LinearInterpOnInterp1D</span></code>(xInterpolators,&nbsp;y_values)</td>
<td>A 2D interpolator that linearly interpolates among a list of 1D interpolators.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">LowerEnvelope</span></code>(*functions)</td>
<td>The lower envelope of a finite set of 1D functions, each of which can be of any class that has the methods __call__, derivative, and eval_with_derivative.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">MargValueFunc</span></code>(cFunc,&nbsp;CRRA)</td>
<td>A class for representing a marginal value function in models where the standard envelope condition of v&#8217;(m) = u&#8217;(c(m)) holds (with CRRA utility).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.PrefShockConsumerType" title="ConsPrefShockModel.PrefShockConsumerType"><code class="xref py py-obj docutils literal"><span class="pre">PrefShockConsumerType</span></code></a>([cycles,&nbsp;time_flow])</td>
<td>A class for representing consumers who experience multiplicative shocks to utility each period, specified as iid lognormal.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">ValueFunc</span></code>(vFuncNvrs,&nbsp;CRRA)</td>
<td>A class for representing a value function.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="ConsPrefShockModel.ConsPrefShockSolver">
<em class="property">class </em><code class="descclassname">ConsPrefShockModel.</code><code class="descname">ConsPrefShockSolver</code><span class="sig-paren">(</span><em>solution_next</em>, <em>IncomeDstn</em>, <em>PrefShkDstn</em>, <em>LivPrb</em>, <em>DiscFac</em>, <em>CRRA</em>, <em>Rboro</em>, <em>Rsave</em>, <em>PermGroFac</em>, <em>BoroCnstArt</em>, <em>aXtraGrid</em>, <em>vFuncBool</em>, <em>CubicBool</em><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.ConsPrefShockSolver" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for solving the one period consumption-saving problem with risky
income (permanent and transitory shocks), a different interest factor on
borrowing and saving, and multiplicative shocks to utility each period.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">addMPCandHumanWealth</span></code>(solution)</td>
<td>Take a solution and add human wealth and the bounding MPCs to it.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">addSSmNrm</span></code>(solution)</td>
<td>Finds steady state (normalized) market resources and adds it to the solution.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">addvFunc</span></code>(solution,&nbsp;EndOfPrdvP)</td>
<td>Creates the value function for this period and adds it to the solution.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">addvPPfunc</span></code>(solution)</td>
<td>Adds the marginal marginal value function to an existing solution, so that the next solver can evaluate vPP and thus use cubic interpolation.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">assignParameters</span></code>(solution_next,&nbsp;IncomeDstn,&nbsp;...)</td>
<td>Assigns period parameters as attributes of self for use by other methods</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">calcEndOfPrdvP</span></code>()</td>
<td>Calculate end-of-period marginal value of assets at each point in aNrmNow.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">defBoroCnst</span></code>(BoroCnstArt)</td>
<td>Defines the constrained portion of the consumption function as cFuncNowCnst, an attribute of self.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">defUtilityFuncs</span></code>()</td>
<td>Defines CRRA utility function for this period (and its derivatives, and their inverses), saving them as attributes of self for other methods to use.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">defValueFuncs</span></code>()</td>
<td>Defines the value and marginal value function for this period.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.ConsPrefShockSolver.getPointsForInterpolation" title="ConsPrefShockModel.ConsPrefShockSolver.getPointsForInterpolation"><code class="xref py py-obj docutils literal"><span class="pre">getPointsForInterpolation</span></code></a>(EndOfPrdvP,&nbsp;aNrmNow)</td>
<td>Find endogenous interpolation points for each asset point and each discrete preference shock.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">makeBasicSolution</span></code>(EndOfPrdvP,&nbsp;aNrm,&nbsp;interpolator)</td>
<td>Given end of period assets and end of period marginal value, construct the basic solution for this period.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">makeCubiccFunc</span></code>(mNrm,&nbsp;cNrm)</td>
<td>Makes a cubic spline interpolation of the unconstrained consumption function for this period.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">makeEndOfPrdvFunc</span></code>(EndOfPrdvP)</td>
<td>Construct the end-of-period value function for this period, storing it as an attribute of self for use by other methods.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">makeLinearcFunc</span></code>(mNrm,&nbsp;cNrm)</td>
<td>Makes a linear interpolation to represent the (unconstrained) consumption function.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">makePFcFunc</span></code>()</td>
<td>Makes the (linear) consumption function for this period.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.ConsPrefShockSolver.makevFunc" title="ConsPrefShockModel.ConsPrefShockSolver.makevFunc"><code class="xref py py-obj docutils literal"><span class="pre">makevFunc</span></code></a>(solution)</td>
<td>Make the beginning-of-period value function (unconditional on the shock).</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">prepareToCalcEndOfPrdvP</span></code>()</td>
<td>Prepare to calculate end-of-period marginal value by creating an array of market resources that the agent could have next period, considering the grid of end-of-period assets and the distribution of shocks he might experience next period.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">prepareToSolve</span></code>()</td>
<td>Perform preparatory work before calculating the unconstrained consumption function.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">setAndUpdateValues</span></code>(solution_next,&nbsp;...)</td>
<td>Unpacks some of the inputs (and calculates simple objects based on them), storing the results in self for use by other methods.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">solve</span></code>()</td>
<td>Solves the single period consumption-saving problem using the method of endogenous gridpoints.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ConsPrefShockModel.ConsPrefShockSolver.usePointsForInterpolation" title="ConsPrefShockModel.ConsPrefShockSolver.usePointsForInterpolation"><code class="xref py py-obj docutils literal"><span class="pre">usePointsForInterpolation</span></code></a>(cNrm,&nbsp;mNrm,&nbsp;...)</td>
<td>Make a basic solution object with a consumption function and marginal value function (unconditional on the preference shock).</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ConsPrefShockModel.ConsPrefShockSolver.getPointsForInterpolation">
<code class="descname">getPointsForInterpolation</code><span class="sig-paren">(</span><em>EndOfPrdvP</em>, <em>aNrmNow</em><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.ConsPrefShockSolver.getPointsForInterpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Find endogenous interpolation points for each asset point and each
discrete preference shock.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>EndOfPrdvP</strong> : np.array</p>
<blockquote>
<div><p>Array of end-of-period marginal values.</p>
</div></blockquote>
<p><strong>aNrmNow</strong> : np.array</p>
<blockquote>
<div><p>Array of end-of-period asset values that yield the marginal values
in EndOfPrdvP.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>c_for_interpolation</strong> : np.array</p>
<blockquote>
<div><p>Consumption points for interpolation.</p>
</div></blockquote>
<p><strong>m_for_interpolation</strong> : np.array</p>
<blockquote class="last">
<div><p>Corresponding market resource points for interpolation.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ConsPrefShockModel.ConsPrefShockSolver.makevFunc">
<code class="descname">makevFunc</code><span class="sig-paren">(</span><em>solution</em><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.ConsPrefShockSolver.makevFunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Make the beginning-of-period value function (unconditional on the shock).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>solution</strong> : ConsumerSolution</p>
<blockquote>
<div><p>The solution to this single period problem, which must include the
consumption function.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>vFuncNow</strong> : ValueFunc</p>
<blockquote class="last">
<div><p>A representation of the value function for this period, defined over
normalized market resources m: v = vFuncNow(m).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ConsPrefShockModel.ConsPrefShockSolver.usePointsForInterpolation">
<code class="descname">usePointsForInterpolation</code><span class="sig-paren">(</span><em>cNrm</em>, <em>mNrm</em>, <em>interpolator</em><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.ConsPrefShockSolver.usePointsForInterpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a basic solution object with a consumption function and marginal
value function (unconditional on the preference shock).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>cNrm</strong> : np.array</p>
<blockquote>
<div><p>Consumption points for interpolation.</p>
</div></blockquote>
<p><strong>mNrm</strong> : np.array</p>
<blockquote>
<div><p>Corresponding market resource points for interpolation.</p>
</div></blockquote>
<p><strong>interpolator</strong> : function</p>
<blockquote>
<div><p>A function that constructs and returns a consumption function.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>solution_now</strong> : ConsumerSolution</p>
<blockquote class="last">
<div><p>The solution to this period&#8217;s consumption-saving problem, with a
consumption function, marginal value function, and minimum m.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ConsPrefShockModel.PrefShockConsumerType">
<em class="property">class </em><code class="descclassname">ConsPrefShockModel.</code><code class="descname">PrefShockConsumerType</code><span class="sig-paren">(</span><em>cycles=1</em>, <em>time_flow=True</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.PrefShockConsumerType" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for representing consumers who experience multiplicative shocks to
utility each period, specified as iid lognormal.</p>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">__call__</span></code>(**kwds)</td>
<td>Assign an arbitrary number of attributes to this agent, as a convenience.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.PrefShockConsumerType.advanceIncShks" title="ConsPrefShockModel.PrefShockConsumerType.advanceIncShks"><code class="xref py py-obj docutils literal"><span class="pre">advanceIncShks</span></code></a>()</td>
<td>Advance the permanent and transitory income shocks to the next period of the shock history objects, after first advancing the preference shocks.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">advancecFunc</span></code>()</td>
<td>Advance the consumption function to the next period in the solution.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">assignParameters</span></code>(**kwds)</td>
<td>Assign an arbitrary number of attributes to this agent.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">cFunc_terminal_</span></code></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.PrefShockConsumerType.calcBoundingValues" title="ConsPrefShockModel.PrefShockConsumerType.calcBoundingValues"><code class="xref py py-obj docutils literal"><span class="pre">calcBoundingValues</span></code></a>()</td>
<td>Calculate human wealth plus minimum and maximum MPC in an infinite horizon model with only one period repeated indefinitely.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">distance</span></code>(other)</td>
<td>A generic distance method, which requires the existence of an attribute called distance_criteria, giving a list of strings naming the attributes to be considered by the distance metric.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">initializeSim</span></code>([a_init,&nbsp;p_init,&nbsp;t_init,&nbsp;sim_prds])</td>
<td>Readies this type for simulation by clearing its history, initializing state variables, and setting time indices to their correct position.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">isSameThing</span></code>(solutionA,&nbsp;solutionB)</td>
<td>Compare two solutions to see if they are the &#8220;same.&#8221;  The model-specific solution class must have a method called distance, which takes another solution object as an input and returns the &#8220;distance&#8221; between the solutions.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.PrefShockConsumerType.makeEulerErrorFunc" title="ConsPrefShockModel.PrefShockConsumerType.makeEulerErrorFunc"><code class="xref py py-obj docutils literal"><span class="pre">makeEulerErrorFunc</span></code></a>([mMax,&nbsp;approx_inc_dstn])</td>
<td>Creates a &#8220;normalized Euler error&#8221; function for this instance, mapping from market resources to &#8220;consumption error per dollar of consumption.&#8221; Stores result in attribute eulerErrorFunc as an interpolated function.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">makeIncShkHist</span></code>()</td>
<td>Makes histories of simulated income shocks for this consumer type by drawing from the discrete income distributions, storing them as attributes of self for use by simulation methods.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.PrefShockConsumerType.makePrefShkHist" title="ConsPrefShockModel.PrefShockConsumerType.makePrefShkHist"><code class="xref py py-obj docutils literal"><span class="pre">makePrefShkHist</span></code></a>()</td>
<td>Makes histories of simulated preference shocks for this consumer type by drawing from the shock distribution&#8217;s true lognormal form.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">postSolve</span></code>()</td>
<td>A method that is run immediately after the model is solved, to finalize the solution in some way.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">preSolve</span></code>()</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">resetRNG</span></code>()</td>
<td>Reset the random number generator for this type.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">simConsHistory</span></code>()</td>
<td>Simulates a history of bank balances, market resources, consumption, marginal propensity to consume, assets (after all actions), and permanent income given initial assets (normalized by permanent income).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ConsPrefShockModel.PrefShockConsumerType.simOnePrd" title="ConsPrefShockModel.PrefShockConsumerType.simOnePrd"><code class="xref py py-obj docutils literal"><span class="pre">simOnePrd</span></code></a>()</td>
<td>Simulate a single period of a consumption-saving model with permanent and transitory income shocks plus multiplicative utility shocks.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">solution_terminal_</span></code></td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">solve</span></code>()</td>
<td>Solve the model for this instance of an agent type by backward induction.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">timeFlip</span></code>()</td>
<td>Reverse the flow of time for this instance.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">timeFwd</span></code>()</td>
<td>Make time flow forward for this instance.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">timeReport</span></code>()</td>
<td>Report to the user the direction that time is currently &#8220;flowing&#8221; for this instance.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">timeRev</span></code>()</td>
<td>Make time flow backward for this instance.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">unpack_cFunc</span></code>()</td>
<td>&#8220;Unpacks&#8221; the consumption functions into their own field for easier access.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ConsPrefShockModel.PrefShockConsumerType.update" title="ConsPrefShockModel.PrefShockConsumerType.update"><code class="xref py py-obj docutils literal"><span class="pre">update</span></code></a>()</td>
<td>Updates the assets grid, income process, terminal period solution, and preference shock process.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">updateAssetsGrid</span></code>()</td>
<td>Updates this agent&#8217;s end-of-period assets grid by constructing a multi- exponentially spaced grid of aXtra values.</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">updateIncomeProcess</span></code>()</td>
<td>Updates this agent&#8217;s income process based on his own attributes.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ConsPrefShockModel.PrefShockConsumerType.updatePrefShockProcess" title="ConsPrefShockModel.PrefShockConsumerType.updatePrefShockProcess"><code class="xref py py-obj docutils literal"><span class="pre">updatePrefShockProcess</span></code></a>()</td>
<td>Make a discrete preference shock structure for each period in the cycle for this agent type, storing them as attributes of self for use in the solution (and other methods).</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">updateSolutionTerminal</span></code>()</td>
<td>Update the terminal period solution.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">vFunc_terminal_</span></code></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ConsPrefShockModel.PrefShockConsumerType.advanceIncShks">
<code class="descname">advanceIncShks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.PrefShockConsumerType.advanceIncShks" title="Permalink to this definition">¶</a></dt>
<dd><p>Advance the permanent and transitory income shocks to the next period of
the shock history objects, after first advancing the preference shocks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>none</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">none</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ConsPrefShockModel.PrefShockConsumerType.calcBoundingValues">
<code class="descname">calcBoundingValues</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.PrefShockConsumerType.calcBoundingValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate human wealth plus minimum and maximum MPC in an infinite
horizon model with only one period repeated indefinitely.  Store results
as attributes of self.  Human wealth is the present discounted value of
expected future income after receiving income this period, ignoring mort-
ality.  The maximum MPC is the limit of the MPC as m &#8211;&gt; mNrmMin.  The
minimum MPC is the limit of the MPC as m &#8211;&gt; infty.</p>
<p>NOT YET IMPLEMENTED FOR THIS CLASS</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ConsPrefShockModel.PrefShockConsumerType.makeEulerErrorFunc">
<code class="descname">makeEulerErrorFunc</code><span class="sig-paren">(</span><em>mMax=100</em>, <em>approx_inc_dstn=True</em><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.PrefShockConsumerType.makeEulerErrorFunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a &#8220;normalized Euler error&#8221; function for this instance, mapping
from market resources to &#8220;consumption error per dollar of consumption.&#8221;
Stores result in attribute eulerErrorFunc as an interpolated function.
Has option to use approximate income distribution stored in self.IncomeDstn
or to use a (temporary) very dense approximation.</p>
<p>NOT YET IMPLEMENTED FOR THIS CLASS</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mMax</strong> : float</p>
<blockquote>
<div><p>Maximum normalized market resources for the Euler error function.</p>
</div></blockquote>
<p><strong>approx_inc_dstn</strong> : Boolean</p>
<blockquote>
<div><p>Indicator for whether to use the approximate discrete income distri-
bution stored in self.IncomeDstn[0], or to use a very accurate
discrete approximation instead.  When True, uses approximation in
IncomeDstn; when False, makes and uses a very dense approximation.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ConsPrefShockModel.PrefShockConsumerType.makePrefShkHist">
<code class="descname">makePrefShkHist</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.PrefShockConsumerType.makePrefShkHist" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes histories of simulated preference shocks for this consumer type by
drawing from the shock distribution&#8217;s true lognormal form.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>none</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">none</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ConsPrefShockModel.PrefShockConsumerType.simOnePrd">
<code class="descname">simOnePrd</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.PrefShockConsumerType.simOnePrd" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulate a single period of a consumption-saving model with permanent
and transitory income shocks plus multiplicative utility shocks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>none</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">none</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ConsPrefShockModel.PrefShockConsumerType.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.PrefShockConsumerType.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the assets grid, income process, terminal period solution, and
preference shock process.  A very slight extension of IndShockConsumerType.update()
for the preference shock model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>None</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ConsPrefShockModel.PrefShockConsumerType.updatePrefShockProcess">
<code class="descname">updatePrefShockProcess</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.PrefShockConsumerType.updatePrefShockProcess" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a discrete preference shock structure for each period in the cycle
for this agent type, storing them as attributes of self for use in the
solution (and other methods).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>none</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">none</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ConsPrefShockModel.solveConsPrefShock">
<code class="descclassname">ConsPrefShockModel.</code><code class="descname">solveConsPrefShock</code><span class="sig-paren">(</span><em>solution_next</em>, <em>IncomeDstn</em>, <em>PrefShkDstn</em>, <em>LivPrb</em>, <em>DiscFac</em>, <em>CRRA</em>, <em>Rboro</em>, <em>Rsave</em>, <em>PermGroFac</em>, <em>BoroCnstArt</em>, <em>aXtraGrid</em>, <em>vFuncBool</em>, <em>CubicBool</em><span class="sig-paren">)</span><a class="headerlink" href="#ConsPrefShockModel.solveConsPrefShock" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves a single period of a consumption-saving model with preference shocks
to marginal utility.  Problem is solved using the method of endogenous gridpoints.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>solution_next</strong> : ConsumerSolution</p>
<blockquote>
<div><p>The solution to the succeeding one period problem.</p>
</div></blockquote>
<p><strong>IncomeDstn</strong> : [np.array]</p>
<blockquote>
<div><p>A list containing three arrays of floats, representing a discrete
approximation to the income process between the period being solved
and the one immediately following (in solution_next). Order: event
probabilities, permanent shocks, transitory shocks.</p>
</div></blockquote>
<p><strong>PrefShkDstn</strong> : [np.array]</p>
<blockquote>
<div><p>Discrete distribution of the multiplicative utility shifter.  Order:
probabilities, preference shocks.</p>
</div></blockquote>
<p><strong>LivPrb</strong> : float</p>
<blockquote>
<div><p>Survival probability; likelihood of being alive at the beginning of
the succeeding period.</p>
</div></blockquote>
<p><strong>DiscFac</strong> : float</p>
<blockquote>
<div><p>Intertemporal discount factor for future utility.</p>
</div></blockquote>
<p><strong>CRRA</strong> : float</p>
<blockquote>
<div><p>Coefficient of relative risk aversion.</p>
</div></blockquote>
<p><strong>Rboro: float</strong></p>
<blockquote>
<div><p>Interest factor on assets between this period and the succeeding
period when assets are negative.</p>
</div></blockquote>
<p><strong>Rsave: float</strong></p>
<blockquote>
<div><p>Interest factor on assets between this period and the succeeding
period when assets are positive.</p>
</div></blockquote>
<p><strong>PermGroGac</strong> : float</p>
<blockquote>
<div><p>Expected permanent income growth factor at the end of this period.</p>
</div></blockquote>
<p><strong>BoroCnstArt: float or None</strong></p>
<blockquote>
<div><p>Borrowing constraint for the minimum allowable assets to end the
period with.  If it is less than the natural borrowing constraint,
then it is irrelevant; BoroCnstArt=None indicates no artificial bor-
rowing constraint.</p>
</div></blockquote>
<p><strong>aXtraGrid: np.array</strong></p>
<blockquote>
<div><p>Array of &#8220;extra&#8221; end-of-period asset values&#8211; assets above the
absolute minimum acceptable level.</p>
</div></blockquote>
<p><strong>vFuncBool: boolean</strong></p>
<blockquote>
<div><p>An indicator for whether the value function should be computed and
included in the reported solution.</p>
</div></blockquote>
<p><strong>CubicBool: boolean</strong></p>
<blockquote>
<div><p>An indicator for whether the solver should use cubic or linear inter-
polation.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">solution: ConsumerSolution</p>
<blockquote class="last">
<div><p>The solution to the single period consumption-saving problem.  Includes
a consumption function cFunc (using linear splines), a marginal value
function vPfunc, a minimum acceptable level of normalized market re-
sources mNrmMin, normalized human wealth hNrm, and bounding MPCs MPCmin
and MPCmax.  It might also have a value function vFunc.  The consumption
function is defined over normalized market resources and the preference
shock, c = cFunc(m,PrefShk), but the (marginal) value function is defined
unconditionally on the shock, just before it is revealed.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/generated/ConsPrefShockModel.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">HARK 0.97 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, TEMP.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>